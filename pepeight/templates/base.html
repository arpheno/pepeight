{% load static %}
<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="{% static 'reset.css' %}">
<head>
    <meta charset="UTF-8">
    <title>backend.fail</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
    <style type="text/css">
        * {
            font-family: 'Roboto', sans-serif;
        }

        paper-toolbar {
            background-color: #0b8043 !important;
        }

        [hidden][style="display: block;"] {
            display: block !important;
        }

        h1 {
            font-size: 23px;
        }

        #explorer {
            position: absolute;
            top: 0px;
            bottom: 0px;
            height: 100%;;
        }

        h1, p {
            text-align: center;
            padding: 20px;
        }

        ul {
            list-style: circle;
            display: flex;
            flex-wrap: wrap;;
        }

        ul > a {
            margin: 3px;
            flex: 1 1 100%;
            display: flex;
            align-items: center;
            text-underline: none;
            text-decoration: none;
            color: black;
            font-weight: bold;
        }

        ul > a > paper-card {
            flex: 1 1 100%;
            padding: 8px;
        }

        ul > a:before {
            content: '-';
            margin-right: 3px;
        }

        #editor {
            position: absolute;
            bottom: 0;
            top: 5px;
            border: none;
            left: 0;
            right:0;;
        }

        #editor * {
            font-family: monospace
        }

        #drawer {
            z-index: 15;
        }
    </style>
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900' rel='stylesheet'
          type='text/css'>

    <script src="{% static 'webcomponentsjs/webcomponents.js' %}"></script>
    <link rel="import" href="{% static 'paper-styles/paper-styles.html' %}">
    <link rel="import" href="{% static 'paper-header-panel/paper-header-panel.html' %}">
    <link rel="import" href="{% static 'paper-toolbar/paper-toolbar.html' %}">
    <link rel="import" href="{% static 'paper-tabs/paper-tabs.html' %}">
    <link rel="import" href="{% static 'paper-button/paper-button.html' %}">
    <link rel="import" href="{% static 'paper-item/paper-item.html' %}">
    <link rel="import" href="{% static 'paper-spinner/paper-spinner.html' %}">
    <link rel="import" href="{% static 'wrapped-iframe/wrapped-iframe.html' %}">
    <link rel="import" href="{% static 'paper-icon-button/paper-icon-button.html' %}">
    <link rel="import" href="{% static 'paper-card/paper-card.html' %}">
    <link rel="import" href="{% static 'paper-drawer-panel/paper-drawer-panel.html' %}">
    <link rel="import" href="{% static 'polymer/polymer.html' %}">
    <link rel="import" href="{% static 'paper-menu/paper-menu.html' %}">
    <link rel="stylesheet" src="{% static 'backendfail/base.css' %}">
</head>
<body>
<paper-drawer-panel>
    <paper-header-panel drawer>
        <paper-toolbar>
            <a href="/" style="text-decoration: none;">
                <div style="color:white;text-underline: none">pep8.xyz</div>
            </a>
        </paper-toolbar>
        <nav id="explorer">
            <h1> Settings</h1>
        </nav>
    </paper-header-panel>
    <paper-header-panel main>
        <paper-toolbar>
            <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
            <a>
                <paper-button name="submit-file" onclick="update_file();" style="font-weight:bold;color:white">Run
                </paper-button>
            </a>
        </paper-toolbar>
        <main style="display:flex;justify-content: center;align-items: center;align-content: center;
        position: absolute;left:0;right: 0;top:0;bottom:0;">
            <div id="editor"></div>
            <script src="//d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript"
                    charset="utf-8"></script>
            <script type="text/javascript">
                function update_file() {
                    /*
                     This function reads in the contents from the editor
                     and updates the resource on the server. If it succeeds
                     it will refresh the preview.
                     */
                    var editor = ace.edit("editor");
                    code = editor.getValue();
                    var csrf = $("{% csrf_token %}").attr("value"); // This is needed because of django
                    $.post("", {code: code, csrfmiddlewaretoken: csrf},function(data){
                        editor.setValue(data, -1); // Reset the Cursor
                    });
                }
                $(function () {
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/chrome");
                    editor.getSession().setMode("ace/mode/python");
                });

            </script>
        </main>
    </paper-header-panel>
</paper-drawer-panel>

<footer style="display: flex;z-index:1000;align-content:center;align-items:center;justify-content: space-around;background-color: #0b8043;padding:0;position:fixed;bottom: 0;height:20px;left:0;right:0">
    <p style="padding:0;color:white;">
        Please note that this is a beta version.
        <a style="padding: 2px;text-decoration: none;color:lightblue;" href="https://github.com/arpheno/pepeight/">
            Contribute on Github
        </a>
    </p>

    <p style="padding:0;color:white;">
        Â©2015
        <a style="padding: 2px;text-decoration: none;color:lightblue;" href="https://careers.stackoverflow.com/sswozny">
            Sebastian Wozny
        </a>
    </p>
</footer>
</body>
</html>